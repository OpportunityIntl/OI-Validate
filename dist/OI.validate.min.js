/* OI-Validate v0.9.0 
 * Copyright (c) 2015 Opportunity International 
 */
var Validate=function(a){function b(a){var b=a.data("oi-validate");return b?b:!1}function c(a,c){var d=b(a)||{};data=$.extend(d,c),a.data("oi-validate",data)}function d(a){var b={valid:!0,validations:[],element:a};a.is("[required]")&&b.validations.push({validation:function(){return""!==$(this).val()},fieldMessage:"Required field",formMessage:"Please fill out missing fields"}),a.is('[type="email"]')&&b.validations.push({validation:function(){var a=/^[0-9a-zA-Z][-.+_a-zA-Z0-9]*@([0-9a-zA-Z][-._0-9a-zA-Z]*\.)+[a-zA-Z]{2,6}$/;return a.test($(this).val())},fieldMessage:"Invalid email address",formMessage:"Please enter valid email address"}),a.is("select")&&(b.element=a.parents(".select")),c($(a),b)}function e(){g.form.find('input[type!="radio"][required], select[required], textarea[required]').each(function(){g.addField($(this))})}function f(){g.form.attr("novalidate","novalidate"),g.form.submit(function(){return g.hideErrors(),g.validate()?alert("Form validated"):(g.displayErrors(),g.validateOnBlur(!0)),!1}),e()}var g=this;this.form=$(a),this.fields=$(),this.errorMessages=[],this.validate=function(){var a=0;return g.fields.each(function(){g.validateField($(this))||a++}),a>0?!1:!0},this.validateField=function(a){var d=b(a),e=!0;return d&&(g.hideError(d.element),$.each(d.validations,function(b,f){f.validation.call(a)?(g.hideError(d.element),c(a,{valid:!0}),e=!0):(g.displayError(d.element,f.fieldMessage),g.errorMessages.push(f.formMessage),c(a,{valid:!1}),e=!1)})),e},this.displayError=function(a,b){var c=$("<div>",{"class":"error-message",style:"display: none"});c.html(b),a.after(c),c.slideDown(500),a.addClass("error")},this.hideError=function(a){var b=a.siblings(".error-message");b.slideUp(500,function(){b.remove()}),a.removeClass("error")},this.displayErrors=function(){var a=g.errorMessages.reduce(function(a,b){return a.indexOf(b)<0&&a.push(b),a},[]),b=g.form.find(".alert.error");0===b.length?(b=$("<div>",{"class":"alert error",style:"display: none"}),g.form.prepend(b)):b.html(""),b.append($("<p>").html("<strong>Looks like there are some problems with the highlighted fields. Please address the following errors:</strong>"));var c=$("<ul>");$.each(a,function(a,b){c.append($("<li>").html(b))}),b.append(c),b.slideDown(500)},this.hideErrors=function(){var a=g.form.find(".alert.error");a.remove(),g.errorMessages=[]},this.validateOnBlur=function(a){a?g.fields.on("blur.validate change.validate",function(){g.validateField($(this))}):g.fields.off("blur.validate change.validate")},this.addField=function(a){d(a),g.fields=g.fields.add(a)},f()};